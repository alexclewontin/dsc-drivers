PACKAGE_NAME="@DKMS_PACKAGE_NAME@"
PACKAGE_VERSION="#MODULE_VERSION#"
AUTOINSTALL="yes"

BUILT_MODULE_NAME[0]="pciesvc"
BUILT_MODULE_LOCATION[0]="drivers/linux/pciesvc/${kernelver}/"
DEST_MODULE_LOCATION[0]="/updates"

# Find out how many CPU cores can be use if we pass appropriate -j option to make.
# DKMS could use all cores on multicore systems to build the kernel module.
num_cpu_cores()
{
  if [ -x /usr/bin/nproc ]; then
    nproc
  else
    echo "1"
  fi
}

MAKE="'make' -C drivers/linux/pciesvc -j$(num_cpu_cores) KDIR=/lib/modules/${kernelver}/build"
